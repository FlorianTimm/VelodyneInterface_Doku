% cd-semicon.sty
% from http://www.jokr.de/stefan/
% File created by Stefan Krause -- version 1.3.
% Supports additional semiconductor symbols for circdia.sty.
% WARNING: \schottky for \trans is in beta and subject to change.
% Diodes
\renewcommand{\diodeL}[1]{
 \setstandardtextpos{ud}
 \placerefvalH{-1.75}{0}{1.75}{-2.75}{0}{2.75}
 #1
 \ifthenelse{\equal{\cdinfo}{capdio}}{\begin{scope}[shift = {(0.45, 0)}]}{}
 \iffilleddiode
  \filldraw [cdmedlines] (-1.25, 0) -- (1.25, -1.25) -- (1.25, 1.25) -- cycle;
 \else
  \draw [cdmedlines] (-1.25, 0) -- (1.25, -1.25) -- (1.25, 1.25) -- cycle;
 \fi
 \draw [cdmedlines] (-1.25, -1.25) -- (-1.25, 1.25);
 \ifthenelse{\equal{\cdinfo}{capdio}}{
  \end{scope}
  \draw [cdmedlines] (-1.7, -1.25) -- (-1.7, 1.25);
  \draw (-1.7, 0) -- (-2, 0);
  \ifemptydiode\draw (1.7, 0) -- (2, 0);\else\draw (-0.8, 0) -- (2, 0);\fi
 }{
  \ifemptydiode
   \draw (-1.25, 0) -- (-2, 0) (1.25, 0) -- (2, 0);
  \else
   \draw (-2, 0) -- (2, 0);
  \fi
 }
}
\renewcommand{\diodeR}[1]{
 \setstandardtextpos{ud}
 \placerefvalH{-1.75}{0}{1.75}{-2.75}{0}{2.75}
 #1
 \ifthenelse{\equal{\cdinfo}{capdio}}{\begin{scope}[shift = {(-0.45, 0)}]}{}
 \iffilleddiode
  \filldraw [cdmedlines] (1.25, 0) -- (-1.25, 1.25) -- (-1.25, -1.25) -- cycle;
 \else
  \draw [cdmedlines] (1.25, 0) -- (-1.25, 1.25) -- (-1.25, -1.25) -- cycle;
 \fi
 \draw [cdmedlines] (1.25, -1.25) -- (1.25, 1.25);
 \ifthenelse{\equal{\cdinfo}{capdio}}{
  \end{scope}
  \draw [cdmedlines] (1.7, -1.25) -- (1.7, 1.25);
  \ifemptydiode\draw (-1.7, 0) -- (-2, 0);\else\draw (0.8, 0) -- (-2, 0);\fi
  \draw (1.7, 0) -- (2, 0);
 }{
  \ifemptydiode
   \draw (-1.25, 0) -- (-2, 0) (1.25, 0) -- (2, 0);
  \else
   \draw (-2, 0) -- (2, 0);
  \fi
 }
}
\renewcommand{\diodeU}[1]{
 \setstandardtextpos{r}
 \placerefvalV{-1.75}{0}{1.75}{-2.75}{0}{2.75}
 #1
 \ifthenelse{\equal{\cdinfo}{capdio}}{\begin{scope}[shift = {(0, -0.45)}]}{}
 \iffilleddiode
  \filldraw [cdmedlines] (0, 1.25) -- (-1.25, -1.25) -- (1.25,-1.25) -- cycle;
 \else
  \draw [cdmedlines] (0, 1.25) -- (-1.25, -1.25) -- (1.25,-1.25) -- cycle;
 \fi
 \draw [cdmedlines] (-1.25, 1.25) -- (1.25, 1.25);
 \ifthenelse{\equal{\cdinfo}{capdio}}{
  \end{scope}
  \draw [cdmedlines] (-1.25, 1.7) -- (1.25, 1.7);
  \ifemptydiode\draw (0, -1.7) -- (0, -2);\else\draw (0, 0.8) -- (0, -2);\fi
  \draw (0, 1.7) -- (0, 2);
 }{
  \ifemptydiode
   \draw (0, -1.25) -- (0, -2) (0, 1.25) -- (0, 2);
  \else
   \draw (0, -2) -- (0, 2);
  \fi
 }
}
\renewcommand{\diodeD}[1]{
 \setstandardtextpos{r}
 \placerefvalV{-1.75}{0}{1.75}{-2.75}{0}{2.75}
 #1
 \ifthenelse{\equal{\cdinfo}{capdio}}{\begin{scope}[shift = {(0, 0.45)}]}{}
 \iffilleddiode
  \filldraw [cdmedlines] (0, -1.25) -- (1.25, 1.25) -- (-1.25, 1.25) -- cycle;
 \else
  \draw [cdmedlines] (0, -1.25) -- (1.25, 1.25) -- (-1.25, 1.25) -- cycle;
 \fi
 \draw [cdmedlines] (-1.25, -1.25) -- (1.25, -1.25);
 \ifthenelse{\equal{\cdinfo}{capdio}}{
  \end{scope}
  \draw [cdmedlines] (-1.25, -1.7) -- (1.25, -1.7);
  \draw (0, -1.7) -- (0, -2);
  \ifemptydiode\draw (0, 1.7) -- (0, 2);\else\draw (0, -0.8) -- (0, 2);\fi
 }{
  \ifemptydiode
   \draw (0, -1.25) -- (0, -2) (0, 1.25) -- (0, 2);
  \else
   \draw (0, -2) -- (0, 2);
  \fi
 }
}
% Diacs
\newcommand{\diac}[6][]{
 \prepareelement{D}{}{#4}{#5}{#6}
 \begin{scope}[shift = {(#2, #3)}]
  \ifthenelse{\equal{\cdorient}{H}}{\diacH{#1}}{}
  \ifthenelse{\equal{\cdorient}{V}}{\diacV{#1}}{}
  \drawrefval
 \end{scope}
}
\newcommand{\diacH}[1]{
 \setstandardsuborient{U}
 \setstandardtextpos{ud}
 \placerefvalH{-1.75}{0}{1.75}{-3.5}{0}{3.5}
 #1
 \ifthenelse{\equal{\cdsuborient}{U}}{
  \iffilleddiode
   \filldraw [cdmedlines] (-1.25, -2.1) -- (1.25, -0.85) -- (-1.25, 0.4) (1.25, 2.1) -- (-1.25, 0.85) -- (1.25, -0.4);
  \else
   \draw [cdmedlines] (-1.25, -2.1) -- (1.25, -0.85) -- (-1.25, 0.4) (1.25, 2.1) -- (-1.25, 0.85) -- (1.25, -0.4);
  \fi
 }{}
 \ifthenelse{\equal{\cdsuborient}{D}}{
  \iffilleddiode
   \filldraw [cdmedlines] (1.25, -2.1) -- (-1.25, -0.85) -- (1.25, 0.4) (-1.25, 2.1) -- (1.25, 0.85) -- (-1.25, -0.4);
  \else
   \draw [cdmedlines] (1.25, -2.1) -- (-1.25, -0.85) -- (1.25, 0.4) (-1.25, 2.1) -- (1.25, 0.85) -- (-1.25, -0.4);
  \fi
 }{}
 \draw [cdmedlines] (-1.25, -2.1) -- (-1.25, 2.1) (1.25, -2.1) -- (1.25, 2.1);
 \draw (-1.25, 0) -- (-2, 0) (1.25, 0) -- (2, 0);
}
\newcommand{\diacV}[1]{
 \setstandardsuborient{L}
 \setstandardtextpos{r}
 \placerefvalV{-2.5}{0}{2.5}{-2.75}{0}{2.75}
 #1
 \ifthenelse{\equal{\cdsuborient}{L}}{
  \iffilleddiode
   \filldraw [cdmedlines] (-2.1, 1.25) -- (-0.85, -1.25) -- (0.4, 1.25) (2.1, -1.25) -- (0.85, 1.25) -- (-0.4, -1.25);
  \else
   \draw [cdmedlines] (-2.1, 1.25) -- (-0.85, -1.25) -- (0.4, 1.25) (2.1, -1.25) -- (0.85, 1.25) -- (-0.4, -1.25);
  \fi
 }{}
 \ifthenelse{\equal{\cdsuborient}{R}}{
  \iffilleddiode
   \filldraw [cdmedlines] (-2.1, -1.25) -- (-0.85, 1.25) -- (0.4, -1.25) (2.1, 1.25) -- (0.85, -1.25) -- (-0.4, 1.25);
  \else
   \draw [cdmedlines] (-2.1, -1.25) -- (-0.85, 1.25) -- (0.4, -1.25) (2.1, 1.25) -- (0.85, -1.25) -- (-0.4, 1.25);
  \fi
 }{}
 \draw [cdmedlines] (-2.1, -1.25) -- (2.1, -1.25) (-2.1, 1.25) -- (2.1, 1.25);
 \draw (0, -1.25) -- (0, -2) (0, 1.25) -- (0, 2);
}
% Schottky diodes and transistors
\newcommand{\schottky}{
 \ifthenelse{\equal{\cdelem}{D}}{
  \ifthenelse{\equal{\cdorient}{L}}{
   \draw [cdmedlines] (-1.25, 1.25) -| (-0.75, 0.75) (-1.25, -1.25) -| (-1.75, -0.75);
  }{}
  \ifthenelse{\equal{\cdorient}{R}}{
   \draw [cdmedlines] (1.25, 1.25) -| (1.75, 0.75) (1.25, -1.25) -| (0.75, -0.75);
  }{}
  \ifthenelse{\equal{\cdorient}{U}}{
   \draw [cdmedlines] (-1.25, 1.25) |- (-0.75, 1.75) (1.25, 1.25) |- (0.75, 0.75);
  }{}
  \ifthenelse{\equal{\cdorient}{D}}{
   \draw [cdmedlines] (-1.25, -1.25) |- (-0.75, -0.75) (1.25, -1.25) |- (0.75, -1.75);
  }{}
 }{}
 % WARNING: \schottky for \trans is in beta and subject to change.
 \ifthenelse{\equal{\cdelem}{T}}{
  \draw [cdmedlines] (-1.05, 1.84) -| (-0.55, 1.34) (-1.15, -1.84) -| (-1.65, -1.34);
 }{}
}
% Tunnel diodes
\newcommand{\tunnel}{
 \ifthenelse{\equal{\cdorient}{L}}{
  \draw [cdmedlines] (-1.25, 1.25) -- (-0.4, 1.25) (-1.25, -1.25) -- (-0.4, -1.25);
 }{}
 \ifthenelse{\equal{\cdorient}{R}}{
  \draw [cdmedlines] (1.25, 1.25) -- (0.4, 1.25) (1.25, -1.25) -- (0.4, -1.25);
 }{}
 \ifthenelse{\equal{\cdorient}{U}}{
  \draw [cdmedlines] (-1.25, 1.25) -- (-1.25, 0.4) (1.25, 1.25) -- (1.25, 0.4);
 }{}
 \ifthenelse{\equal{\cdorient}{D}}{
  \draw [cdmedlines] (-1.25, -1.25) -- (-1.25, -0.4) (1.25, -1.25) -- (1.25, -0.4);
 }{}
}
% Capacity diodes
\newcommand{\capdio}{\renewcommand{\cdinfo}{capdio}}
% Thyristors
\newcommand{\thyr}[1]{
 \ifthenelse{\equal{\cdorient}{L}\or\equal{\cdorient}{R}}{
  \ifthenelse{\equal{#1}{LU}}{\draw (-1.25, 0.625) -- (-2, 1) -- (-2, 2);}{}
  \ifthenelse{\equal{#1}{U}}{\draw (0, 0.625) -- (0, 2);}{}
  \ifthenelse{\equal{#1}{RU}}{\draw (1.25, 0.625) -- (2, 1) -- (2, 2);}{}
  \ifthenelse{\equal{#1}{LD}}{\draw (-1.25, -0.625) -- (-2, -1) -- (-2, -2);}{}
  \ifthenelse{\equal{#1}{D}}{\draw (0, -0.625) -- (0, -2);}{}
  \ifthenelse{\equal{#1}{RD}}{\draw (1.25, -0.625) -- (2, -1) -- (2, -2);}{}
 }{}
 \ifthenelse{\equal{\cdorient}{U}\or\equal{\cdorient}{D}}{
  \ifthenelse{\equal{#1}{LU}}{\draw (-0.625, 1.25) -- (-1, 2) -- (-2, 2);}{}
  \ifthenelse{\equal{#1}{L}}{\draw (-0.625, 0) -- (-2, 0);}{}
  \ifthenelse{\equal{#1}{LD}}{\draw (-0.625, -1.25) -- (-1, -2) -- (-2, -2);}{}
  \ifthenelse{\equal{#1}{RU}}{\draw (0.625, 1.25) -- (1, 2) -- (2, 2);}{}
  \ifthenelse{\equal{#1}{R}}{\draw (0.625, 0) -- (2, 0);}{}
  \ifthenelse{\equal{#1}{RD}}{\draw (0.625, -1.25) -- (1, -2) -- (2, -2);}{}
 }{}
}
% Triacs
\newcommand{\triac}[1]{
 \ifthenelse{\equal{\cdorient}{H}}{
  \ifthenelse{\equal{#1}{LU}}{\draw (-1.25, 1.05) -- (-2, 1.425) -- (-2, 3);}{}
  \ifthenelse{\equal{#1}{U}}{\draw (0, 1.475) -- (0,3);}{}
  \ifthenelse{\equal{#1}{RU}}{\draw (1.25, 1.05) -- (2, 1.425) -- (2, 3);}{}
  \ifthenelse{\equal{#1}{LD}}{\draw (-1.25, -1.05) -- (-2, -1.425) -- (-2, -3);}{}
  \ifthenelse{\equal{#1}{D}}{\draw (0, -1.475) -- (0,-3);}{}
  \ifthenelse{\equal{#1}{RD}}{\draw (1.25, -1.05) -- (2, -1.425) -- (2, -3);}{}
 }{}
 \ifthenelse{\equal{\cdorient}{V}}{
  \ifthenelse{\equal{#1}{LU}}{\draw (-1.05, 1.25) -- (-1.425, 2) -- (-3, 2);}{}
  \ifthenelse{\equal{#1}{L}}{\draw (-1.475, 0) -- (-3, 0);}{}
  \ifthenelse{\equal{#1}{LD}}{\draw (-1.05, -1.25) -- (-1.425, -2) -- (-3, -2);}{}
  \ifthenelse{\equal{#1}{RU}}{\draw (1.05, 1.25) -- (1.425, 2) -- (3, 2);}{}
  \ifthenelse{\equal{#1}{R}}{\draw (1.475, 0) -- (3, 0);}{}
  \ifthenelse{\equal{#1}{RD}}{\draw (1.05, -1.25) -- (1.425, -2) -- (3, -2);}{}
 }{}
}
